version: 0.0.2a
project: hranipex
repositories:
  - ./

scripts:
  end to end:
    try:
      - first scripts
    except:
      - on error scripts
    else:
      - on success scripts
    finally:
      - cleanup scripts


infrastructures:
  simple:
    machines:
      webservers:
        distribution: debian
        release: squeeze
      elasticservers:
        distribution: ubuntu
        release: trusty

configurations:
  standard:
    provider: ansible
    inventory: codev://ansible/inventory
    playbook: provisioning/%(infrastructure)s.yml


environments:
  development:
    performer: ssh://codev:codev@192.168.1.13
    isolation: lxc
#    instalace?
#    spustitelny script? - napr pro konfiguraci vpn
    infrastructures:
      full:
        machines:
          webservers:
            provider: lxc
            distribution: debian
            release: squeeze
          elasticservers:
            distribution: ubuntu
            release: trusty
            number: 2
    versions:
      - actual
      - live
      - svc

  staging:
    infrastructures:
      - simple
#    branches:
#      - staging/*
#      - *-staging
  production:
    infrastructures:
      full:
        perfomer: test.coex.cz
        isolation: lxc
        machines:
          webservers:
            provision: real
            host: 10.0.1.5
        scripts:
          before:
            try:
              - first scripts
              - sdasdsad
            except:
              - on error scripts
              - sad sa
            else:
              - on success scripts
            finally:
              - cleanup scripts
          after:

        configuration: standard
    versions:
      - svc

    branches:
      - master

    scripts:
      begin:
        - first scripts
      except:
        - error scripts
      else:
        - success scripts
      finally:
        - cleanup scripts

#configuration:
#  provider: ansible
#    version: 1.2
#    inventory: codev://ansible/inventory
#    playbook: provisioning/%(infrastructure)s.yml
