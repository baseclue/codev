#!/usr/bin/env python

import select
import sys
from json import loads

from codev.perform import CodevPerform
from codev.perform.cli import command


@command(
    help='Run configuration.',
)
def perform(codev_perform: CodevPerform) -> bool:
    if select.select([sys.stdin], [], [], 0.0)[0]:
        load_vars = loads(sys.stdin.read())
    else:
        load_vars = {}
    return codev_perform.perform(load_vars)


if __name__ == "__main__":
    perform()
